!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);t.p,t.p,t.p,t.p,t.p,t.p;function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a={leftEyeColor:"rgb(255,0,0)",rightEyeColor:"rgb(0,0,255)",gridEnabled:!0,score:0,speedLevel:0,increaseSpeedLevel:!0,linesCleared:0,rows:15,columns:12,appState:null,shouldCallResizeOnDraw:!1,gameCanvas:null,gameCanvasWrapper:null,canvasContext:null,xMargin:0,yMargin:0,gridFacetSize:0,coloringMode:"MODE_ALTERNATE_SHAPES",currentShape:null,nextShape:null,gameBoard:null,gameState:"BLOCKS_GAME_INITIAL",gameLogicTicksInterval:1e3,animationId:null,gameLogicId:null,gameLogicTimeoutId:null},i=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},a),c=[];function u(e,n){Object.assign(i,e);var t=Object.keys(e);n&&c.forEach((function(e){var n=e.properties,r=e.callback;(n.some((function(e){return t.includes(e)}))||0===n.length)&&r(i)}))}function l(e){u(e,!0)}function f(e){u(e,!1)}function s(){return i}function d(e,n){var t=Object.keys(i);e.forEach((function(e){if(!t.includes(e))throw new Error("".concat(e," is not key in the state."))})),c.push({properties:e,callback:n})}var p=function(e){l({appState:e})},v={currentState:null,map:{}};function g(e,n){Object.assign(v.map,n);d(["appState"],(function(e){var n=e.appState;if(n!==v.currentState){var t=document.getElementById("root");t.innerHTML="",t.appendChild(v.map[n]),v.currentState=n}})),l({appState:e})}var m=function(e){return e.classList},b=function(e){return document.createElement(e)},y=(window.cancelAnimationFrame||window.mozCancelAnimationFrame,window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}),S=function(e){return y(e)},h=function(e){var n=b("div");return m(n).add("ui-menu"),e&&e.forEach((function(e){return n.appendChild(e)})),n},E=function(e,n){var t=b("button");return t.innerText=e,t.onclick=n,m(t).add("ui-menu-item"),t},O=function(e){var n=b("button");return n.innerText=e,n.disabled=!0,m(n).add("ui-menu-title"),n},w=function(e){var n=b("button");return n.innerText=e,n.disabled=!0,m(n).add("ui-menu-item-text"),n},A=function(e){return e<12?"rgb(".concat(255-21.25*e,",0,0)"):"rgb(0,0,".concat(21.25*(e-12),")")},L=function(e){var n=b("canvas");m(n).add("colorpicker");for(var t=n.getContext("2d"),r=n.width/25,o=0;o<=24;o+=1)t.fillStyle=A(o),t.fillRect(o*r,0,r,n.height);return n.addEventListener("click",(function(t){var r=t.clientX;if(n){var o=n.getBoundingClientRect(),a=function(e,n){for(var t=n/25,r=1;e>t*r;)r+=1;return A(r-1)}(r-o.left,o.width);e(a)}})),n},_=function(e){return"".concat(e?"Disable":"Enable"," grid")},C=function(e){var n=b("canvas");return m(n).add("color-indicator"),d([],(function(t){if(n){var r=e(t),o=n.getContext("2d");o.fillStyle=r,o.fillRect(0,0,n.width,n.height)}})),n},M=function(e,n,t){var r=b("button");r.innerHTML="&plus;",r.onclick=e;var o=b("button");o.innerHTML="&minus;",o.onclick=n;var a=b("div");a.innerText=0,d([],(function(e){var n=t(e);a&&(a.innerText=n)}));var i=b("div");return m(i).add("plus-minus-button"),i.appendChild(o),i.appendChild(a),i.appendChild(r),i},T=function(){var e,n,t,r={rows:(e=s()).rows,columns:e.columns,gridEnabled:e.gridEnabled,coloringMode:e.coloringMode,leftEyeColor:e.leftEyeColor,rightEyeColor:e.rightEyeColor,increaseSpeedLevel:e.increaseSpeedLevel};n="c8d6669b-2153-4780-b345-9be69d36fc9d",t=JSON.stringify(r),window.localStorage.setItem(n,t)};function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var P,N=function(){var e,n=(e="c8d6669b-2153-4780-b345-9be69d36fc9d",window.localStorage.getItem(e));null!=n&&l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){j(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},JSON.parse(n)))},k=["MODE_ALTERNATE_CELLS","MODE_ALTERNATE_SHAPES"],B=function(e){var n;switch(e){case"MODE_ALTERNATE_SHAPES":n="shapes";break;case"MODE_ALTERNATE_CELLS":n="cells"}return"Color by ".concat(n)},x=function(){var e=s().coloringMode,n=k.indexOf(e);l({coloringMode:k[(n+1)%k.length]})},R=function(){var e=s().coloringMode,n=E(B(e),x);return d(["coloringMode"],(function(e){var t=e.coloringMode;n&&(n.innerText=B(t))})),n},G=function(e){return"Speed level is ".concat(e?"unlocked":"locked")},D=function(){var e,n=h();return n.appendChild(O("Lazy eye blocks")),n.appendChild((e=E("New Game",(function(){l({appState:"BLOCKS",gameState:"BLOCKS_GAME_PLAYING"})})),d(["gameState"],(function(n){var t=n.gameState;e&&(e.innerText="".concat("BLOCKS_GAME_INITIAL"===t?"New":"Continue"," game"))})),e)),n.appendChild(E("Settings",(function(){return p("SETTINGS_MENU")}))),n};function U(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var K=["T","J","L","S","Z","O","I"],F=(U(P={},"T",[[[0,0],[-1,0],[1,0],[0,-1]],[[0,0],[0,-1],[0,1],[1,0]],[[0,0],[-1,0],[0,1],[1,0]],[[0,0],[0,-1],[-1,0],[0,1]]]),U(P,"L",[[[0,-1],[0,0],[0,1],[1,1]],[[-1,0],[0,0],[1,0],[1,-1]],[[-1,-1],[0,-1],[0,0],[0,1]],[[-1,0],[-1,1],[0,0],[1,0]]]),U(P,"J",[[[-1,1],[0,1],[0,0],[0,-1]],[[-1,0],[0,0],[1,0],[1,1]],[[1,-1],[0,-1],[0,0],[0,1]],[[-1,-1],[-1,0],[0,0],[1,0]]]),U(P,"Z",[[[-1,-1],[0,-1],[0,0],[1,0]],[[1,-1],[1,0],[0,0],[0,1]]]),U(P,"S",[[[1,-1],[0,-1],[0,0],[-1,0]],[[0,-1],[0,0],[1,0],[1,1]]]),U(P,"O",[[[-1,-1],[-1,0],[0,-1],[0,0]]]),U(P,"I",[[[0,-2],[0,-1],[0,0],[0,1]],[[-2,0],[-1,0],[0,0],[1,0]]]),P);function H(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return z(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Y=function(e,n){for(var t=[],r=0;r<n;r+=1){for(var o=[],a=0;a<e;a+=1)o.push(0);t.push(o)}return t},q=function(e,n,t){for(var r=e.length,o=e[0].length,a=n-o,i=t-r,c=Y(n,t),u=t-1;u>=0;u-=1)for(var l=n-1;l>=0;l-=1){var f=u-i,s=l-a;s>=0&&s<o&&(f>=0&&f<r)&&(c[u][l]=e[u-i][l-a])}return c},W=function(){var e=s(),n=e.rows,t=e.columns,r=e.gameBoard,o=e.gameCanvas,a=o.width,i=o.height,c=Math.floor((i-10)/n),u=Math.floor((a-10)/c),l=Math.min(t,u);f({yMargin:(i-c*n)/2,xMargin:(a-c*l)/2,gridFacetSize:c,columns:l,gameBoard:q(r,l,n)})};function $(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return J(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var V=function(){return Math.random()<.5?1:2},Z=function(e){switch(e){case"MODE_ALTERNATE_CELLS":return[1,1,1,1].map(V);case"MODE_ALTERNATE_SHAPES":var n=V();return[n,n,n,n];default:return null}},X=function(e,n){return function(e,n,t){return{type:e,x:Math.floor(n/2),y:-4,currentShapeFormIndex:0,possibleShapeForms:$(F[e]),colors:Z(t)}}(K[Math.floor(Math.random()*K.length)],e,n)},Q=function(e){var n=1500-75*e;return n<100?100:n},ee=function(){switch(s().gameState){case"BLOCKS_GAME_INITIAL":case"BLOCKS_GAME_PAUSE":l({gameState:"BLOCKS_GAME_PLAYING"});break;case"BLOCKS_GAME_PLAYING":l({gameState:"BLOCKS_GAME_PAUSE"})}},ne=function(){var e=s(),n=e.animationId,t=e.gameLogicId,r=e.gameLogicTimeoutId;cancelAnimationFrame(n),cancelAnimationFrame(t),clearInterval(r),f({animationId:null,gameLogicId:null,gameLogicTimeoutId:null})},te=function(){var e=s(),n=e.columns,t=e.rows,r=e.coloringMode;f({score:0,linesCleared:0,nextShape:X(n,r),currentShape:X(n,r),gameBoard:Y(n,t)})},re=function(){confirm("Do you want to reset game?")&&(ne(),te(),l({appState:"MAIN_MENU",gameState:"BLOCKS_GAME_INITIAL"}))};function oe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ae(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ae(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var ie=function(e){var n=e.x,t=e.y;return e.possibleShapeForms[e.currentShapeFormIndex].map((function(e){return[n+e[0],t+e[1]]}))},ce=function(e,n){var t=n[0].length,r=n.length;return ie(e).some((function(e){var o=oe(e,2),a=o[0],i=o[1];return a>t-1||a<0||i>r-1||i>0&&0!==n[i][a]}))};function ue(e,n,t,r){e.x+=t,e.y+=r,ce(e,n)&&(e.x-=t,e.y-=r)}var le=function(e,n){return ue(e,n,-1,0)},fe=function(e,n){return ue(e,n,1,0)},se=function(e,n){for(;!ce(e,n);)e.y+=1;e.y-=1},de=function(e,n){var t=e.possibleShapeForms,r=e.currentShapeFormIndex;r===t.length-1?e.currentShapeFormIndex=0:e.currentShapeFormIndex+=1,ce(e,n)&&(e.currentShapeFormIndex=r)},pe=function(e){var n=s(),t=n.gameBoard;e(n.currentShape,t)},ve=function(e){var n=s(),t=n.appState,r=n.gameState,o=n.gameBoard,a=n.gridEnabled,i=n.currentShape,c=e.keyCode;switch(c){case 80:case 19:ee();break;case 71:l({gridEnabled:!a});break;case 27:case 81:re()}if("BLOCKS"===t&&"BLOCKS_GAME_PLAYING"===r)switch(c){case 37:case 72:le(i,o);break;case 39:case 76:fe(i,o);break;case 38:case 75:de(i,o);break;case 40:case 74:ue(i,o,0,1);break;case 32:se(i,o)}},ge=function(){var e=s().gameCanvas,n=document.querySelector(".game-canvas-wrapper").getBoundingClientRect(),t=n.width,r=n.height;e.setAttribute("width",.9*t),e.setAttribute("height",.9*r),e.style.width="width: ".concat(.9*t,"px;"),e.style.height="height: ".concat(.9*r,"px")},me=function(e){var n=s().speedLevel;if(!(n+e<0)){var t=n+e;l({speedLevel:t,gameLogicTicksInterval:Q(t)})}},be=function(e){return"Level: ".concat(e)},ye=function(e){return"Score: ".concat(e)},Se=function(e){var n=s(),t=n.rows,r=n.columns,o=n.gameBoard;t+e>=4&&l({rows:t+e,gameBoard:q(o,r,t+e),shouldCallResizeOnDraw:!0})},he=function(e){var n=s(),t=n.rows,r=n.columns,o=n.gameBoard;r+e>=4&&l({columns:r+e,gameBoard:q(o,r+e,t),shouldCallResizeOnDraw:!0})},Ee=function(e,n){var t=b("button");return m(t).add("action-button"),t.onclick=function(){n(),document.querySelectorAll("button").forEach((function(e){return e.blur()}))},t.innerHTML=e,t},Oe=function(){l({appState:"MAIN_MENU",gameState:"BLOCKS_GAME_PAUSE"})},we=function(e){var n=b("div");return m(n).add("stat-info"),n.innerHTML=e,n},Ae=function(e){switch(e){case"BLOCKS_GAME_PLAYING":return"Pause";case"BLOCKS_GAME_INITIAL":case"BLOCKS_GAME_PAUSE":return"Play"}return null};function Le(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Le(Object(t),!0).forEach((function(n){Ce(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ce(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Me(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Te(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Te(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Ie=function(e,n,t){switch(e){case 1:return n;case 2:return t;default:return"#000000"}};function je(e,n,t,r,o,a,i,c){ie(t).forEach((function(u,l){var f=Me(u,2),s=f[0],d=f[1];if(!(d<0)){var p=r+s*a,v=o+d*a,g=t.colors[l];e.fillStyle=n||Ie(g,i,c),e.fillRect(p,v,a+1,a+1)}}))}var Pe=function e(){var n=s(),t=n.rows,r=n.columns,o=n.yMargin,a=n.xMargin,i=n.gameBoard,c=n.nextShape,u=n.speedLevel,l=n.gridEnabled,d=n.leftEyeColor,p=n.linesCleared,v=n.currentShape,g=n.rightEyeColor,m=n.gridFacetSize,b=n.gameCanvasWrapper,y=n.canvasContext,h=n.gameCanvas,E=n.increaseSpeedLevel,O=n.shouldCallResizeOnDraw,w=b.getBoundingClientRect().height;Math.abs(h.height-w)>100&&(ge(),W()),O&&window.onresize(),y.clearRect(0,0,h.width,h.height),function(e,n,t,r,o,a,i){var c=n.length,u=n[0].length;e.fillStyle="#000000",e.fillRect(t,r,u*o,c*o);for(var l=0;l<c;l+=1)for(var f=0;f<u;f+=1)e.fillStyle=Ie(n[l][f],a,i),e.fillRect(t+f*o,r+l*o,o+1,o+1)}(y,i,a,o,m,d,g),function(e,n,t,r,o,a){e.strokeStyle="#8f99a8",e.lineWidth=1,e.strokeRect(r,o,n*a,t*a)}(y,r,t,a,o,m),v&&je(y,null,v,a,o,m,d,g),c&&function(e,n,t,r,o,a,i){e.scale(.25,.25),je(e,"#f5eace",_e(_e({},n),{},{x:3,y:3}),4*t,4*r,o,a,i),e.setTransform(1,0,0,1,0,0)}(y,v.y<0?v:c,a,o,m,d,g),l&&function(e,n,t,r,o,a,i,c){e.strokeStyle="#8f99a8",e.lineWidth=1,e.beginPath();for(var u=1;u<n;u+=1){var l=r+u*a;e.moveTo(l,o),e.lineTo(l,c-o)}for(var f=t-1;f>0;f-=1){var s=o+f*a;e.moveTo(r,s),e.lineTo(i-r,s)}e.closePath(),e.stroke()}(y,r,t,a,o,m,h.width,h.height),E&&function(e,n,t,r,o,a,i,c,u,l){var f,s=t*c,d=n*c,p=d*(l/((f=u)*f));e.beginPath(),e.lineWidth=5,e.strokeStyle=r,e.moveTo(a,i+s),e.lineTo(a+d,i+s),e.closePath(),e.stroke(),e.beginPath(),e.strokeStyle=o,e.moveTo(a,i+s),e.lineTo(a+p,i+s),e.closePath(),e.stroke()}(y,r,t,d,g,a,o,m,u,p),f({animationId:S(e),shouldCallResizeOnDraw:!1})};function Ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ke(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Be(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return xe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Re=function e(){var n=s().gameLogicTicksInterval,t=setTimeout((function(){var n=s(),r=n.score,o=n.rows,a=n.columns,i=n.gameState,c=n.gameBoard,u=n.nextShape,d=n.speedLevel,p=n.currentShape,v=n.linesCleared,g=n.coloringMode,m=n.increaseSpeedLevel;if("BLOCKS_GAME_PLAYING"===i){if(p.y+=1,ce(p,c)){if(p.y-=1,ie(p).forEach((function(e,n){var t=Be(e,2),r=t[0],i=t[1];r<0||i<0||r>a||i>o||(c[i][r]=p.colors[n])})),c[0].some((function(e){return 0!==e})))return void l({gameState:"BLOCKS_GAME_OVER"});var b=function(e){for(var n=0,t=e.length-1;t>0;t-=1)if(e[t].every((function(e){return 0!==e}))){n+=1;for(var r=t;r>=0;r-=1)e[r]=r-1<0?e[r].fill(0):H(e[r-1]);t+=1}return n}(c);if(b>0){var y={},h=r+(4===b?10:b),E=v+b,O=(w=E,Math.floor(Math.sqrt(w))+1);d<O&&Object.assign(y,{speedLevel:m?O:d,gameLogicTicksInterval:Q(O)}),Object.assign(y,{score:h}),f({linesCleared:E}),l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ne(Object(t),!0).forEach((function(n){ke(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},y))}f({currentShape:u,nextShape:X(a,g)})}var w;f({gameLogicTimeoutId:t,gameLogicId:S(e)})}}),n)},Ge=function(e){e.rows,e.columns;var n=e.gameState;switch(n){case"BLOCKS_GAME_INITIAL":te();break;case"BLOCKS_GAME_PLAYING":S(Pe),S(Re);break;case"BLOCKS_GAME_PAUSE":ne();break;case"BLOCKS_GAME_OVER":ne(),l({appState:"GAME_OVER_STATE",gameState:"BLOCKS_GAME_INITIAL"});break;default:throw new Error("Unsupported game state: ".concat(n))}},De=function(){document.addEventListener("keydown",ve,!1),d(["gameState","appState"],(function(e){return Ge(e)}))},Ue=function(){var e=function(){var e=b("canvas");m(e).add("game-canvas"),f({gameCanvas:e,canvasContext:e.getContext("2d")});var n=b("div");return m(n).add("game-canvas-wrapper"),n.appendChild(e),f({gameCanvasWrapper:n}),window.onresize=function(){ge(),W()},n}();!function(e){var n=new Hammer(e);n.get("swipe").set({direction:Hammer.DIRECTION_ALL}),n.on("swipeup",(function(){return pe(de)})),n.on("swipeleft",(function(){return pe(le)})),n.on("swiperight",(function(){return pe(fe)})),n.on("swipedown",(function(){return pe(se)}))}(e);var n,t,r,o=b("div");m(o).add("action-button-row"),o.appendChild((n=s().gameState,t=Ee(Ae(n),ee),d(["gameState"],(function(e){var n=e.gameState;t.innerHTML=Ae(n)})),t)),o.appendChild(Ee("Restart",re)),o.appendChild(Ee("Back",Oe)),o.appendChild((r=we("score: ".concat(0)),d(["score"],(function(e){var n=e.score;r.innerText="score: ".concat(n)})),r)),o.appendChild(function(){var e=we("level: ".concat(0));return d(["speedLevel"],(function(n){var t=n.speedLevel;e.innerText="level: ".concat(t)})),e}());var a=b("div");return m(a).add("game-container"),a.appendChild(o),a.appendChild(e),De(),a};function Ke(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}window.onload=function(){var e,n,t,r,o,a,i,c,u,f;g("MAIN_MENU",(Ke(e={},"MAIN_MENU",D()),Ke(e,"SETTINGS_MENU",h([O("Settings"),(u=_(s().gridEnabled),f=E(u,(function(){l({gridEnabled:!s().gridEnabled})})),d(["gridEnabled"],(function(e){var n=e.gridEnabled;f&&(f.innerText=_(n))})),f),R(),E("Speed level",(function(){return p("SPEED_SETTINGS_MENU")})),E("Left eye color",(function(){return p("LEFT_EYE_COLOR_PICKER_MENU")})),E("Right eye color",(function(){return p("RIGHT_EYE_COLOR_PICKER_MENU")})),E("Board size",(function(){return p("BOARD_SIZE_SETTINGS_MENU")})),E("Save settings",T),E("Load settings",N),E("Back",(function(){return p("MAIN_MENU")}))])),Ke(e,"SPEED_SETTINGS_MENU",function(){return h([O("Speed level"),(t=b("div"),t.innerText=0,t.setAttribute("id","speed-level-indicator"),d(["speedLevel"],(function(e){var n=e.speedLevel;t&&(t.innerText=n)})),t),E("Faster",(function(){return me(1)})),E("Slower",(function(){return me(-1)})),E("Back",(function(){return p("SETTINGS_MENU")})),(e=s().increaseSpeedLevel,n=E(G(e),(function(){l({increaseSpeedLevel:!s().increaseSpeedLevel})})),d(["increaseSpeedLevel"],(function(e){var t=e.increaseSpeedLevel;n&&(n.innerText=G(t))})),n)]);var e,n,t}()),Ke(e,"LEFT_EYE_COLOR_PICKER_MENU",h([O("Left eye color"),C((function(e){return e.leftEyeColor})),L((function(e){return l({leftEyeColor:e})})),E("Back",(function(){return p("SETTINGS_MENU")}))])),Ke(e,"RIGHT_EYE_COLOR_PICKER_MENU",h([O("Right eye color"),C((function(e){return e.rightEyeColor})),L((function(e){return l({rightEyeColor:e})})),E("Back",(function(){return p("SETTINGS_MENU")}))])),Ke(e,"BOARD_SIZE_SETTINGS_MENU",(i=M((function(){return Se(1)}),(function(){return Se(-1)}),(function(e){return e.rows})),c=M((function(){return he(1)}),(function(){return he(-1)}),(function(e){return e.columns})),h([O("Board size"),w("Rows"),i,w("Columns"),c,E("Back",(function(){return p("SETTINGS_MENU")}))]))),Ke(e,"BLOCKS",Ue()),Ke(e,"GAME_OVER_STATE",(n=s(),t=n.score,r=n.speedLevel,o=w(ye(t)),a=w(be(r)),d(["score","speedLevel"],(function(e){var n=e.score,t=e.speedLevel;o.innerHTML=ye(n),a.innerHTML=be(t)})),h([O("Game over"),o,a,E("Back",(function(){return p("MAIN_MENU")}))]))),e))}}]);